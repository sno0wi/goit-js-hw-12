{"version":3,"file":"commonHelpers.js","sources":["../src/main.js"],"sourcesContent":["import iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\n// const form = document.querySelector('.form');\n// const searchInput = document.getElementById('searchInput');\n// const gallery = document.querySelector('.gallery')\n// const loader = document.querySelector('.loader')\n\n// function getSearchQueryFromLocalStorage() {\n//     return localStorage.getItem('searchQuery') || '';\n// }\n// function saveSearchQueryToLocalStorage(query) {\n//     localStorage.setItem('searchQuery', query);\n// }\n\n// function fillInputFromLocalStorage() {\n//     const savedQuery = getSearchQueryFromLocalStorage();\n//     searchInput.value = savedQuery;\n// }\n// function removeSearchQueryToLocalStorage(){\n//     localStorage.removeItem('searchQuery')\n// }\n\n\n// function search(event) {\n//     event.preventDefault();\n//     removeSearchQueryToLocalStorage();\n\n//     const apiKey = '41833958-d4e1402628473c9a9cbd6bb32';\n//     const inputValue = searchInput.value.trim();\n\n//     if (!inputValue) {\n//         iziToast.warning({\n//             message: \"Please enter a search query.\",\n//         });\n//         return;\n//     }\n\n//     const apiUrl = `https://pixabay.com/api/?key=${apiKey}&q=${inputValue}&image_type=photo&orientation=horizontal&safesearch=true`;\n//     loader.style.display = 'block';\n\n//     fetch(apiUrl)\n//         .then(response => response.json())\n//         .then(images => {\n//                 if (images.hits.length === 0) {\n//                 iziToast.error({\n//                     message: \"No images found. Please try again with a different search query.\",\n//                 });\n//                 return;\n//             }\n\n//             const imageHTML = images.hits.map(({ webformatURL, largeImageURL, tags, likes, views, comments, downloads }) => {\n//                 return `\n//                 <li class=\"gallery-item\">\n//                     <a class=\"gallery-link\" href=\"${largeImageURL}\">\n//                         <img class=\"gallery-image\" src=\"${webformatURL}\" alt=\"${tags}\" />\n//                     </a>\n//                     <div class=\"image-details\">\n//                         <p>Likes </br> ${likes}</p>\n//                         <p>Views </br>  ${views}</p>\n//                         <p>Comments </br>  ${comments}</p>\n//                         <p>Downloads </br>  ${downloads}</p>\n//                     </div>\n//                 </li>`\n//             }).join('');\n\n//             gallery.innerHTML = imageHTML;\n//             const lightbox = new SimpleLightbox('.gallery a');\n//             lightbox.refresh();\n//         })\n//         .catch(() => {\n//             iziToast.error({\n//                 message: \"Sorry, there are no images matching your search query. Please try again!\",\n//            })\n//         })\n//         .finally(() => {\n//             loader.style.display = 'none';\n//         });\n// }\n\n// fillInputFromLocalStorage();\n// searchInput.addEventListener('input', () => saveSearchQueryToLocalStorage(event.target.value));\n// form.addEventListener('submit', search);\n\n// _________________________________________\n// Розбив на окремі функції\n// _________________________________________\nfunction fetchImage(imageName) {\n    const apiKey = '41833958-d4e1402628473c9a9cbd6bb32';\n    return fetch(`https://pixabay.com/api/?key=${apiKey}&q=${imageName.toLowerCase()}&image_type=photo&orientation=horizontal&safesearch=true`)\n        .then((resp) => {\n            if (!resp.ok) {\n                throw new Error(resp.statusText)\n            }\n            \n            return resp.json();\n        });\n}\n\nconst form = document.querySelector('.form');\nform.addEventListener('submit', handleSearch);\nconst gallery = document.querySelector('.gallery');\n\nfunction handleSearch(event) {\n    event.preventDefault();\n\n    const formElement = event.currentTarget;\n    const query = formElement.elements.query.value;\n\n    console.log(query);\n\n    fetchImage(query)\n        .then(renderImageCard)\n        .catch(onFetchError)\n        .finally(() => form.reset());\n}\n\nfunction renderImageCard(images) {\n    const imageHTML = images.hits.map(({ webformatURL, largeImageURL, tags, likes, views, comments, downloads }) =>`\n                <li class=\"gallery-item\">\n                    <a class=\"gallery-link\" href=\"${largeImageURL}\">\n                        <img class=\"gallery-image\" src=\"${webformatURL}\" alt=\"${tags}\" />\n                    </a>\n                    <div class=\"image-details\">\n                        <p>Likes </br> ${likes}</p>\n                        <p>Views </br>  ${views}</p>\n                        <p>Comments </br>  ${comments}</p>\n                        <p>Downloads </br>  ${downloads}</p>\n                    </div>\n                </li>`\n            ).join('');\n\n            gallery.innerHTML = imageHTML;\n            const lightbox = new SimpleLightbox('.gallery a');\n            lightbox.refresh();\n}\n\nfunction onFetchError(error) {\n  alert(\"Упс, щось пішло не так і ми не знайшли вашого покемона!\");\n  console.error(error);\n}"],"names":["fetchImage","imageName","resp","form","handleSearch","gallery","event","query","renderImageCard","onFetchError","images","imageHTML","webformatURL","largeImageURL","tags","likes","views","comments","downloads","SimpleLightbox","error"],"mappings":"svBAyFA,SAASA,EAAWC,EAAW,CAE3B,OAAO,MAAM,qEAA4CA,EAAU,aAAa,0DAA0D,EACrI,KAAMC,GAAS,CACZ,GAAI,CAACA,EAAK,GACN,MAAM,IAAI,MAAMA,EAAK,UAAU,EAGnC,OAAOA,EAAK,MACxB,CAAS,CACT,CAEA,MAAMC,EAAO,SAAS,cAAc,OAAO,EAC3CA,EAAK,iBAAiB,SAAUC,CAAY,EAC5C,MAAMC,EAAU,SAAS,cAAc,UAAU,EAEjD,SAASD,EAAaE,EAAO,CACzBA,EAAM,eAAc,EAGpB,MAAMC,EADcD,EAAM,cACA,SAAS,MAAM,MAEzC,QAAQ,IAAIC,CAAK,EAEjBP,EAAWO,CAAK,EACX,KAAKC,CAAe,EACpB,MAAMC,CAAY,EAClB,QAAQ,IAAMN,EAAK,MAAK,CAAE,CACnC,CAEA,SAASK,EAAgBE,EAAQ,CAC7B,MAAMC,EAAYD,EAAO,KAAK,IAAI,CAAC,CAAE,aAAAE,EAAc,cAAAC,EAAe,KAAAC,EAAM,MAAAC,EAAO,MAAAC,EAAO,SAAAC,EAAU,UAAAC,CAAW,IAAI;AAAA;AAAA,oDAE/DL,CAAa;AAAA,0DACPD,CAAY,UAAUE,CAAI;AAAA;AAAA;AAAA,yCAG3CC,CAAK;AAAA,0CACJC,CAAK;AAAA,6CACFC,CAAQ;AAAA,8CACPC,CAAS;AAAA;AAAA,sBAGvD,EAAc,KAAK,EAAE,EAETb,EAAQ,UAAYM,EACH,IAAIQ,EAAe,YAAY,EACvC,QAAO,CAC5B,CAEA,SAASV,EAAaW,EAAO,CAC3B,MAAM,yDAAyD,EAC/D,QAAQ,MAAMA,CAAK,CACrB"}